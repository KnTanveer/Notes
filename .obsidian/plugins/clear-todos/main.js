/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var T=(n,i)=>{for(var e in i)c(n,e,{get:i[e],enumerable:!0})},h=(n,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of f(i))!u.call(n,o)&&o!==e&&c(n,o,{get:()=>i[o],enumerable:!(t=p(i,o))||t.enumerable});return n};var w=n=>h(c({},"__esModule",{value:!0}),n);var E={};T(E,{default:()=>a});module.exports=w(E);var r=require("obsidian"),v=/(^|\n)\t*- \[x\].*?(?=\n|$)/g,s={clearSelection:"Clear todos in selection or current file",clearFile:"Clear todos in file"},l="check-check",d="clear-todos",a=class extends r.Plugin{async onload(){this.addCommand({id:d,name:s.clearSelection,editorCallback:(e,t)=>{this.clearTodosInView(t)},icon:l}),this.editorMenuEvent=this.app.workspace.on("editor-menu",e=>{let t=this.app.workspace.getActiveViewOfType(r.MarkdownView);if(!t){console.error("Clear Todos: No active MarkdownView found");return}e.addItem(o=>o.setTitle(s.clearSelection).setIcon(l).onClick(()=>this.clearTodosInView(t)))}),this.fileMenuEvent=this.app.workspace.on("file-menu",(e,t)=>{e.addItem(o=>o.setTitle(s.clearFile).setIcon(l).onClick(()=>this.clearTodosForFile(t)))})}onunload(){super.onunload(),this.removeCommand(d),this.app.workspace.offref(this.editorMenuEvent),this.app.workspace.offref(this.fileMenuEvent)}async clearTodosForFile(e){if(!(e instanceof r.TFile))return;let t=await e.vault.read(e);await e.vault.modify(e,this.clearTodoString(t))}clearTodosInView(e){var o;let t=(o=e.editor)==null?void 0:o.getSelection();return t?e.editor.replaceSelection(this.clearTodoString(t)):e.setViewData(this.clearTodoString(e.data),!1)}clearTodoString(e){return e.replace(v,"")}};

/* nosourcemap */